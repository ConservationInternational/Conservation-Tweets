# -*- coding: utf-8 -*-
"""
Created on Tue Aug 30 14:46:55 2016

@author: mcooper
"""

import tweepy
import datetime

class StdOutListener(tweepy.StreamListener):
    def on_data(self, data):
        f = open('temp_tweets/' + str(datetime.datetime.now()).replace(':', '.') + '.json', 'w')
        f.write(data)
        f.close()
        
        return True

    def on_error(self, status):
		f = open('errorlong.txt', 'w')
		f.write(str(datetime.datetime.now())+str(status.text))
        f.close()


l = StdOutListener()
auth = tweepy.OAuthHandler(consumerKey, consumerSecret)
auth.set_access_token(accessToken, accessTokenSecret)

'''
filt = []
f = open('keywords.txt', 'r')
for i in f:
    filt.append(i.rstrip('\n'))
f.close()

filt = set(filt)
filt = ','.join(filt)
'''

stream = tweepy.Stream(auth, l)
stream.filter(languages=['en'], locations='127.2804878048780779,-10.7297416341462988,141.0457317073170884,5.6391608048780935,124.8262195121950526,-8.4195282195121557,127.7286585365853000,5.0042522682927242,94.9054878048779926,-7.9073330975609313,105.3521341463414416,1.2481547073171195,94.1385289634145721,0.9173620243902949,100.1354801829267700,6.1033376341463930,100.0127667682926074,1.1307766585366359,101.3839557926828547,2.7847400731707825,101.2078887195121268,1.1361120243902945,102.5150533536584732,2.1338254390244407,104.8572789634145721,-11.1725769999999489,116.2749618902438442,0.9920571463415153,105.3267911585365084,0.3304717804878567,109.6164253048779642,5.3243742195122454,115.4213033536584589,0.7573010487805405,115.8267911585365084,4.1292522682927357,114.6316692073170032,0.8853498292683444,115.6987423780487063,3.0621790975610281,111.9853277439023600,0.7573010487805405,114.8450838414633353,1.7390083658537101,110.7475228658536111,0.8640083658537114,112.0706935975609184,1.1574534878049310,109.5577362804877595,0.7839778780488338,110.4914253048779926,1.1948010487805409,109.5577362804877595,1.1361120243902971,110.1926448170731163,1.4455632439024924,109.5804115853658089,1.5856165975610286,109.6711128048780068,1.7910281829268822,109.5990853658536111,1.4282233048781015,109.8805259146341058,1.6042903780488333') #track=[filt])
